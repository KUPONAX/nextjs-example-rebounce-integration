(()=>{"use strict";var __webpack_modules__={661:(e,t,o)=>{o.d(t,{R:()=>d});var n=o(116);function r(e){return e?.pagetype?e.pagetype():window.kp_site?window.kp_site:window.kp_order_id?"orderconfirmation":window.kp_wishlist_product_ids?"wishlist":window.kp_shoppingcart_product_ids?"shoppingcart":window.kp_product_id?"productdetail":window.kp_category_id?"category":"startpage"}function i(e){const t=new Date,o=e.codeInjections.cookieLifetime||"86400.seconds";if(o){const[e,n]=o.split("."),r="milliseconds"===n?1:"seconds"===n?1e3:"minutes"===n?6e4:"hours"===n?36e5:"days"===n?864e5:"weeks"===n?6048e5:"months"===n?2628e6:1e3;t.setTime(t.getTime()+parseInt(e)*r)}else t.setTime(t.getTime()+864e5);return t.toUTCString()}function a(e,t){const o=JSON.parse(localStorage.getItem("kp")||"{}")?.ttl<new Date?null:JSON.parse(localStorage.getItem("kp")||"{}"),r=[!0];if(o?.ttl&&new Date(o.ttl)<new Date&&((0,n.Rm)("TTL expired"),localStorage.removeItem("kp")),e.rules&&e.rules.length>0){(0,n.Rm)("Checking rules");const i=e?.rules||[];if(i.find((e=>e.parameter.includes("calls")))){const e=i.filter((e=>e.parameter.includes("calls"))).map((e=>{const[o,n]=e.parameter.split("."),[r]=(i.find((e=>e.parameter==="calls"+(n?"."+n:"")))||{value:"0.0"}).value.split(".");return!(n&&(t.kp_pagetypecalls[n]||0)>=parseFloat(`${r}`)||!n&&t.kp_historyLength>=parseFloat(`${r}`))}));r.push(!e.includes(!1))}if(i.find((e=>"frequencyCapping"===e.parameter))){const[e]=(i.find((e=>"frequencyCapping"===e.parameter))||{value:"0.0"}).value.split(".");o&&o.calls&&parseFloat(`${o.calls}`)>parseFloat(`${e}`)&&r.push(!1)}if(i.find((e=>"devMode"===e.parameter))){const e=i.find((e=>"devMode"===e.parameter));localStorage.getItem("kp_debug")&&"true"===localStorage.getItem("kp_debug")||"1"!==e?.value||r.push(!1)}if(i.find((e=>"url1"===e.parameter)))try{const e=s((i.find((e=>"url1"===e.parameter))||{value:""}).value);new RegExp(e).test(window.location.href)||r.push(!1)}catch(e){console.error("Error in url1 regex:",e)}if(i.find((e=>"url2"===e.parameter)))try{const e=s((i.find((e=>"url2"===e.parameter))||{value:""}).value);new RegExp(e).test(window.location.href)&&r.push(!1)}catch(e){console.error("Error in url2 regex:",e)}if(i.find((e=>"device_useragent"===e.parameter)))try{const e=s((i.find((e=>"device_useragent"===e.parameter))||{value:""}).value),t=new RegExp(e),o=navigator.userAgent||navigator.vendor||window.opera;o&&t.test(o)&&r.push(!1)}catch(e){console.error("Error in device_useragent regex:",e)}}if(e.codeInjections?.customBounceRules&&r.push(e.codeInjections.customBounceRules()),e.codeInjections?.viewport)switch(e.codeInjections.viewport){case"desktop":window.innerWidth<1024&&r.push(!1);break;case"mobile":window.innerWidth>=1024&&r.push(!1);break;case"tablet":(window.innerWidth<768||window.innerWidth>=1024)&&r.push(!1)}return e.codeInjections?.bounceCapping&&o?.bounces>e.codeInjections.bounceCapping&&r.push(!1),!r.includes(!1)}function s(e){return e.replace(/\[([0-9A-Fa-f]{4})\]/g,((e,t)=>{const o=parseInt(t,16);return String.fromCharCode(o)}))}async function c(e,t,o){(0,n.Rm)("Initializing ReBounce");const s={debug:!1},[c,p]=document.location.href.split("?");if((p&&p.includes("kp_debug=true")||localStorage.getItem("kp_debug"))&&(s.debug=!0),p&&p.includes("kp_debug=false")&&(s.debug=!1),s.debug?((0,n.Rm)("Debug mode enabled"),localStorage.setItem("kp_debug",JSON.stringify(!0))):localStorage.removeItem("kp_debug"),sessionStorage.getItem("kp_rebounce")){(0,n.Rm)("ReBounce already initialized - restoring data from session");const i=function(){const e=JSON.parse(sessionStorage.getItem("kp_rebounce")||"{}");return e||(0,n.Rm)("kp_rebounce not found in sessionStorage"),e}()||{};if(Object.entries(i).forEach((e=>{t[e[0]]=e[1]})),t.kp_lastHref!==document.location.href&&!t.ids.includes(window.history.state?.kp_id||"")){t.kp_lastHref=document.location.href;const o=crypto.randomUUID();window.history.replaceState({...window.history.state,kp_id:o},"",document.location.href);const n=r(e.codeInjections);t.kp_pagetypecalls={...t.kp_pagetypecalls,[n]:t.kp_pagetypecalls&&t.kp_pagetypecalls[n]?t.kp_pagetypecalls[n]+1:1},t.ids.push(o),t.kp_historyLength=t.kp_historyLength+1}o(t),(0,n.C$)(t)}else{(0,n.Rm)("Initializing ReBounce from scratch");const a=crypto.randomUUID(),s=crypto.randomUUID();window.history.replaceState({...window.history.state,kp_pagemarker:"entry",kp_pagetype:r(e.codeInjections),kp_id:a},"",document.location.href),history.pushState({...window.history.state,kp_pagemarker:"block-back",kp_pagetype:r(e.codeInjections),kp_id:s},"",document.location.href),t.kp_entryPosition=window.history.length-1,t.kp_historyLength=window.history.length-(window.history.length-1),t.kp_lastHref=document.location.href,t.kp_pagetypecalls={[r(e.codeInjections)]:1},t.ids=[a,s],o(t);const c={...localStorage.getItem("kp")?JSON.parse(localStorage.getItem("kp")||"{}"):{calls:0,bounces:0}},p=i(e);(0,n.Rm)("Setting cookie TTL to",p),c.calls++,localStorage.setItem("kp",JSON.stringify({...c,ttl:p})),(0,n.yY)(t),sessionStorage.setItem("kp_rebounce",JSON.stringify(t))}!function(e,t,o){window.addEventListener("popstate",(s=>{if(window.kp_ispopstate=!0,(0,n.Rm)("Popstate"),s.state&&"entry"===s.state.kp_pagemarker&&a(e,t)){const t={...localStorage.getItem("kp")?JSON.parse(localStorage.getItem("kp")||"{}"):{calls:0,bounces:0}};t.bounces++;const o=i(e);(0,n.Rm)("Setting cookie TTL to",o),localStorage.setItem("kp",JSON.stringify({...t,ttl:o}));const{template_url:a,query:s,path:c}=function(e){if(void 0!==e.codeInjections.multipleLandingpages){const{landingpage:t,query:o,path:r}=e.codeInjections.multipleLandingpages();return(0,n.Rm)("Landingpage URL found for function:",{template_url:t,query:o,path:r}),{template_url:t,query:o,path:r}}if(e.multipleLandingpages&&e.multipleLandingpages.length>0)for(const t of e.multipleLandingpages)try{if(new RegExp(t.regex).test(document.location.href))return(0,n.Rm)("Landingpage URL found for regex:",t.regex,t.url),{template_url:t.url,query:t.query,path:t.path}}catch(e){console.error("Error parsing regex:",t.regex,e)}return{template_url:e.template_url}}(e),p="/"===a[a.length-1]?a.split("").slice(0,-1).join("")+window.location.pathname:a+window.location.pathname,l=JSON.parse(sessionStorage.getItem("kp_rebounce")||"{}"),d=l.ids?.length||0,u=Object.entries(l.kp_pagetypecalls).map((e=>{let t="sp";switch(e[0]){default:case"startpage":t="sp";break;case"category":t="c";break;case"productdetail":t="pd";break;case"orderconfirmation":t="oc";break;case"wishlist":t="wl";break;case"shoppingcart":t="sc"}return`${t}${e[1]}`})).join("|"),g=s?.replace("?","&")||"",_=p+(c?"/"===c[0]?c.slice(1):c:"")+((0,n._o)()?`?camp=rb-chain-${d}&kwd=${u}&source=${r(e.codeInjections)}`:`?mtm_campaign=rb-chain-${d}&mtm_kwd=${u}&mtm_source=${r(e.codeInjections)}`)+g;if(!/^(https?:\/\/)([a-zA-Z0-9-]+(\.[a-zA-Z0-9-]+)+)(\/[^/?#]+)*\/?(\?[^#]*)?$/.test(_))return void console.error("Invalid URL:",_);window.location.href=_}else s.state&&"entry"===s.state.kp_pagemarker&&!a(e,t)&&history.back();t.kp_lastHref=document.location.href,o(t)}));let s=0;const c=new MutationObserver((()=>{setTimeout((()=>{0!==s||window.history.state?.kp_pagemarker||t.kp_lastHref===document.location.href||window.kp_ispopstate||(s++,t.kp_lastHref=document.location.href,function(e,t,o){if(window.kp_ispopstate)return;const i=crypto.randomUUID();t.kp_historyLength=window.history.length-t.kp_entryPosition;const a=r(e.codeInjections);t.kp_pagetypecalls=t.kp_pagetypecalls||{},t.kp_pagetypecalls[a]=t.kp_pagetypecalls[a]?t.kp_pagetypecalls[a]+1:1,t.ids.includes(window.history.state?.kp_id||"")||(t.ids.push(i),window.history.replaceState({...window.history.state,kp_id:i},"",document.location.href)),(0,n.C$)(t),o(t),sessionStorage.setItem("kp_rebounce",JSON.stringify(t))}(e,t,o),o(t)),s=0,window.kp_ispopstate=!1}),100)}));c.observe(document.body,{childList:!0})}(e,t,o),async function(e){if((0,n.Rm)("Starting Neory Tracking"),e.codeInjections?.preventNeory&&e.codeInjections?.preventNeory())(0,n.Rm)("Preventing Neory Tracking");else{if(e.codeInjections.preventNeoryRegex)try{if(new RegExp(e.codeInjections.preventNeoryRegex).test(window.location.href))return void(0,n.Rm)("Preventing Neory Tracking")}catch(e){console.error("Error in preventNeoryRegex:",e)}try{const t=r(e.codeInjections);e.codeInjections.neoryTracking&&e.codeInjections.neoryTracking(t);let o="view";switch(t){case"cart":case"shoppingcart":o="basket";break;case"orderconfirmation":o="transaction";break;default:o="view"}let{feedId:i}=e;if(e.additionalFeedIds?.length)try{const t=e.additionalFeedIds?.map((e=>new RegExp(e.regex)));for(let o=0;o<t.length;o++)if(t[o].test(window.location.href)){i=e.additionalFeedIds[o].feedId;break}}catch(e){console.error("Error in additionalFeedIds regex:",e)}const a=function(e){if(void 0!==e.codeInjections.multipleNeoryIds){const t=e.codeInjections.multipleNeoryIds();return(0,n.Rm)("NeoryID found for function:"),t}if(e.multipleNeoryIds&&e.multipleNeoryIds.length>0)for(const{neory_id:t,regex:o}of e.multipleNeoryIds)try{if(new RegExp(o).test(document.location.href))return(0,n.Rm)("NeoryID found for regex:"),t}catch(e){console.error("Error in multipleNeoryIds regex:",e)}return e.neory_id}(e),s={a,version:1,event:o,cat:i,gdpr:0,gdpr_consent:"",segment:window.kp_category_id||"",items:window.kp_product_id||""};await fetch(`https://ad.ad-srv.net/retarget?${Object.entries(s).map((([e,t])=>`${e}=${t}`)).join("&")}`,{mode:"no-cors",credentials:"include"})?(0,n.Rm)("Neory Tracking successful"):(0,n.Rm)("Neory Tracking failed")}catch(e){console.error(e)}}}(e),function(e){e.piggybacks&&e.piggybacks.length>0&&e.piggybacks.map((t=>{if(t.pagetypes){const o=r(e.codeInjections);if(document.head.innerHTML.includes(t.code))return void(0,n.Rm)("Piggyback already loaded");if(t.pagetypes?.length>0&&t.pagetypes.includes(o)){(0,n.Rm)(`Piggyback ${t.title} loaded for pagetype:`,o);const e=document.createElement("script");e.innerHTML=t.code.replaceAll("<script>","").replaceAll("<\/script>",""),document.head.appendChild(e)}}else{(0,n.Rm)("Piggyback loaded: ",t.title);const e=document.createElement("script");e.innerHTML=t.code.replaceAll("<script>","").replaceAll("<\/script>",""),document.head.appendChild(e)}}))}(e)}const p=sessionStorage.getItem("kp_rebounce")?JSON.parse(sessionStorage.getItem("kp_rebounce")||"{}"):{sessionid:crypto.randomUUID(),kp_ispopstate:!1},l=localStorage.getItem("kp");function d(e){c(e,p,u),localStorage.getItem("kp_debug")&&"true"===localStorage.getItem("kp_debug")&&a(e,p)}function u(e){Object.assign(p,e),sessionStorage.setItem("kp_rebounce",JSON.stringify(p))}p.calls=l?JSON.parse(l).calls:0,p.bounces=l?JSON.parse(l).bounces:0},116:(e,t,o)=>{function n(e){if(!a())return;if(document.querySelector("#KP_debugDiv"))return;i("Create debug div");const t=document.createElement("div");t.id="KP_debugDiv",t.innerHTML=`<h2 style="text-align: center; font-weight: bold; font-size: 1.25rem;">ReBounce - Debug Mode 1</h2>\n          <p>Bounce <strong>${window.rb_doBounce?"wont":"will"}</strong> happen</p>\n          <p>Site-History length: ${e.kp_historyLength}</p>\n          <p>Pagecalls: ${JSON.stringify(e.kp_pagetypecalls)}</p>\n          <p>Previous Sessions: ${JSON.parse(localStorage.getItem("kp")||"{}")?.calls||0}</p>`,t.style.cssText="position: fixed; bottom: 0; right: 0; z-index: 99999; padding: 8px 16px; color: #fff; flex-direction: column; justify-items: center; border-radius: 8px 0 0 0;",t.style.backgroundColor="#fd7614",t.style.color="#fff",t.addEventListener("focus",(function(){this.style.border="2px solid red"})),t.addEventListener("blur",(function(){this.style.border="none"})),document.body.appendChild(t)}function r(e){if(!a())return;const t=document.querySelector("#KP_debugDiv");t?(i("Update debug div"),t.innerHTML=`<h2 style="text-align: center; font-weight: bold; font-size: 1.25rem;">ReBounce - Debug Mode 2</h2>\n          <p>Bounce <strong>${window.rb_doBounce?"will":"wont"}</strong> happen</p>\n          <p>Site-History length: ${e.kp_historyLength}</p>\n          <p>Pagecalls: ${JSON.stringify(e.kp_pagetypecalls)}</p>\n          <p>Previous Sessions: ${JSON.parse(localStorage.getItem("kp")||"{}")?.calls||0}</p>`,t.style.backgroundColor="#fd7614",t.style.color="#fff"):n(e)}function i(...e){if(a()){const t=new Date,o=`${t.getHours()}:${t.getMinutes()}:${t.getSeconds()}:${t.getMilliseconds()}`;console.log("%cReBounce","color:#fff; border-radius:8px; background-color:#fd7614; padding:0px 4px; font-weight:bold;","-",`${o}`,"-",...e)}}function a(){return!!localStorage.getItem("kp_debug")}o.d(t,{C$:()=>r,Rm:()=>i,_o:()=>a,yY:()=>n})}},__webpack_module_cache__={};function __webpack_require__(e){var t=__webpack_module_cache__[e];if(void 0!==t)return t.exports;var o=__webpack_module_cache__[e]={exports:{}};return __webpack_modules__[e](o,o.exports,__webpack_require__),o.exports}__webpack_require__.d=(e,t)=>{for(var o in t)__webpack_require__.o(t,o)&&!__webpack_require__.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},__webpack_require__.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var __webpack_exports__={},_lib_ReBounce__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(661),_lib_utlis_debugUtlis__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(116);const config=JSON.parse(JSON.stringify({neory_id:"82515",template_url:"https://rb.snipes.com/pt/",template_place:"custom",affiliate_network_prefix:"kp",feedId:"---",rules:[{parameter:"devMode",value:"0",comparison:"="},{parameter:"calls",value:"9999",comparison:"<="},{parameter:"calls.startpage",value:"9999",comparison:"<="},{parameter:"calls.productdetail",value:"9999",comparison:"<="},{parameter:"calls.category",value:"9999",comparison:"<="}],codeInjections:{},additionalFeedIds:[],multipleLandingpages:[],multipleNeoryIds:[],piggybacks:[]}),reviveFunctions);function reviveFunctions(key,value){if("string"==typeof value&&(value.trim().startsWith("() =>")||value.includes("=>")))try{return eval(`(${value})`)}catch(e){return console.error("Fehler beim Parsen der Funktion:",e),value}return value}(0,_lib_ReBounce__WEBPACK_IMPORTED_MODULE_0__.R)(config),window.addEventListener("pageshow",(e=>{e.persisted&&((0,_lib_utlis_debugUtlis__WEBPACK_IMPORTED_MODULE_1__.Rm)("Page was restored from cache"),(0,_lib_ReBounce__WEBPACK_IMPORTED_MODULE_0__.R)(config))}))})();